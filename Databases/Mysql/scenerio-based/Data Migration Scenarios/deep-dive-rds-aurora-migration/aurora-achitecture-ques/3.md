understood, now wxplain why there write quorum here as writing is done by primary instance only and read replicas does not write in their own disk as they just use shared storage for querying
so there should be no concept of acknoledgement?

# Aurora's Quorum System Explained

Another brilliant question! You've zoomed in on the most crucial and clever part of Aurora's design. The answer lies in the difference between **durability** and **availability**.

Yes, only the Primary instance writes. And yes, the Replicas don't have their own disks to write to. So, why does the Primary need to wait for a quorum of storage nodes to acknowledge the write?

The reason is: **The Primary isn't writing to the Replicas. It's writing to the Distributed Storage System, and that system needs to ensure your data is safe and durable.**

Let's break it down.

## The "Write" Operation is a Two-Party Transaction

Think of it as a conversation between two entities:

1. **The Primary Instance** (The Client)
2. **The Distributed Storage Service** (The Server)

When the Primary Instance says "write this data," it's making a request to the Storage Service. The Storage Service's job is to promise, "Okay, this write is now safe and permanent."

## How Does the Storage Service Keep its Promise? The Quorum.

The Storage Service itself is not a single disk. It's a collection of many (often hundreds) of storage nodes, each holding tiny pieces of the overall data.

To ensure data is not lost even if multiple disks or entire AZs fail, the data is replicated by the storage service itself across many nodes.

**This is where the Write Quorum comes in.**

1. The Primary Instance sends the log record to the Storage Service
2. The Storage Service fans out this record to (for example) 6 different storage nodes that are responsible for that segment of data
3. The Storage Service doesn't wait for all 6 to respond. That would be slow and fragile
4. Instead, it waits for a **Quorum (a majority)** of them to acknowledge they have permanently stored the write. For 6 nodes, a quorum would be 4
5. Once 4 out of the 6 nodes have confirmed the write, the Storage Service sends an acknowledgement back to the Primary Instance: "Mission accomplished. Your data is safe." The Primary can then tell your application that the transaction is committed

## Why is this Necessary? The "What If" Scenarios.

This quorum model is what protects your data from catastrophic failures. Let's imagine what happens without it.

### Scenario 1: The Primary Instance Crashes Immediately After a Write

**Without Quorum:** If the primary only wrote the data to one storage node and then crashed, that data could be lost if that one storage node also fails before the data is copied elsewhere. Your application thinks the transaction was committed, but the data is gone. This is a **durability failure** â€“ the worst kind of database failure.

**With Quorum:** The data exists on 4 independent storage nodes. The chance of all 4 failing simultaneously before the other 2 nodes get the data is astronomically low. Your data is safe.

### Scenario 2: A Network Partition Splits the Storage Nodes

A network issue could isolate 3 storage nodes from the other 3.

The quorum system ensures that only the group that still has a majority (4 nodes) can accept new writes. The isolated minority group (2 nodes) becomes read-only. This prevents a "split-brain" scenario where both sides think they are the truth and accept conflicting writes.

## What About the Read Replicas?

The Read Replicas are **consumers** of the data that the Primary Instance and the Storage Service have already agreed is committed. They are entirely separate from the write quorum process.

Their job is simply to read the latest, quorum-verified data from the storage nodes and cache it for fast query performance.

## The Perfect Analogy: A Distributed Voting System

Imagine a committee that must ratify a new law (a data write).

- **The Primary Instance** is the Prime Minister who proposes the law
- **The Storage Nodes** are the 100 members of parliament
- **The Quorum Rule** is that a law is passed once a majority (51 members) vote "Aye"

### The Process:

1. The PM proposes the law
2. The proposal is sent to all 100 MPs
3. The PM does **not** need to wait for all 100 to respond. He only waits until 51 have sent their "Aye" votes
4. Once the 51st "Aye" is received, the law is ratified and permanent. The PM can announce this to the public (the application)
5. The public (and news agencies, which are like Read Replicas) can now read the new law. The PM doesn't need to call each news agency to get their acknowledgement. The law is already official

The news agencies (Replicas) finding out about the law is a separate, asynchronous process that happens **after** the law is already committed.