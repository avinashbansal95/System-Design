so atual changes to data on main disk happens by checkpoint or snapshot?
what jouranl does evry 100ms?
explain me in simple terms
if i have some data in main source fo truth , so the actual change done by whom?


# MongoDB Checkpoint vs Journal: Who Changes the Main Source of Truth?

Absolutely. This is the final piece of the puzzle. Let's make it crystal clear.

## In Simple Terms: Who Actually Changes the "Main Source of Truth"?

The **Checkpoint** is the process that **actually changes the main source of truth** (the data files on disk).

The **Journal** does **not** change the main data. It only writes a **note to itself** about what needs to be changed later.

## The Perfect Analogy: A Head Chef and Their Notebook

Imagine an incredibly busy chef in a kitchen.

- The **Main Source of Truth** is the official **Cookbook** on the shelf (the Data Files on Disk).
- The **Chef's Memory** is the **WiredTiger Cache** (RAM). It's fast but temporary.
- The **Journal** is the Chef's **Small Notebook** they carry around.
- The **Checkpoint** is the Chef finally **updating the official Cookbook**.

## Here's What Happens:

### 1. An Order Comes In (A Write Request)
"Change the recipe to add more garlic!"

### 2. Step 1: Chef's Memory (Cache)
The chef immediately starts using more garlic in the kitchen. **This is the fastest change.**

### 3. Step 2: Chef's Notebook (Journal - every 100ms)
The chef quickly scribbles in their small notebook: **"Remember: add more garlic to the recipe."**

- **This is the 100ms journal write.** It's not changing the cookbook! It's just making a quick, durable note so they won't forget the change, even if they get amnesia (a crash).
- **This is the Durability Guarantee.** Once this note is written, the chef can confidently say the change is "saved."

### 4. Step 3: Update the Official Cookbook (Checkpoint - every 60s)
When the chef has a free moment (or their notebook gets full), they walk over to the official Cookbook on the shelf, open it, and **permanently cross out the old instruction and write in the new one: "Use 3 cloves of garlic."**

- **This is the Checkpoint.** This is the moment the **main source of truth is actually changed.**

## Direct Answers to Your Questions

### Q: So actual changes to data on main disk happens by checkpoint or snapshot?
**A:** The actual change is done by the **Checkpoint**. The "snapshot" is just a consistent picture of all the changes in memory that the checkpoint uses to update the main disk.

### Q: What does journal do every 100ms?
**A:** It **logs the instruction** for the change. It writes down *what* needs to be done (e.g., "update document X with field Y=Z") in a sequential log file. It does **not** perform the change on the main data files.

### Q: If I have some data in main source of truth, the actual change is done by whom?
**A:** The actual change to the main source of truth is done by the **Checkpoint process**. The journal's only job is to ensure that if the system crashes *after* a change is agreed upon but *before* the checkpoint gets around to it, the change is not lost. The journal will remind the system to make the change when it recovers.

## Summary

The Journal is the **"To-Do List"**. The Checkpoint is the **"Person who does the chores"** on that list. The main source of truth (the data files) is only changed when the chores are done.

## Visual Flow

```
Write Request
    ↓
1. Applied to Cache (RAM) ← Instant change for reads
    ↓
2. Logged to Journal (Disk) ← "Remember to do this" note
    ↓
3. Write Acknowledged ← Client gets confirmation
    ↓
... time passes ...
    ↓
4. Checkpoint Process ← Actually updates main data files
    ↓
Main Source of Truth Updated ← Data files on disk finally changed
```

## Key Takeaway for Interviews

> "The journal provides durability by logging what needs to be done, but it doesn't actually modify the main data files. The checkpoint process is what physically writes the changes from memory to the persistent data files on disk. This separation allows MongoDB to provide fast write acknowledgments (after journal commit) while deferring the slower disk I/O of updating the main data files to a background process."